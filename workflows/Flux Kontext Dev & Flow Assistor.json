{"id":"7ee39464-2239-4bd9-b96e-211b69bfb322","revision":0,"last_node_id":209,"last_link_id":314,"nodes":[{"id":39,"type":"VAELoader","pos":[-1437.5236458233944,501.8015229464196],"size":[474.1875,152.96875],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"vae_name","name":"vae_name","type":"COMBO","widget":{"name":"vae_name"},"link":null}],"outputs":[{"localized_name":"VAE","name":"VAE","type":"VAE","links":[61,223]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.38","Node name for S&R":"VAELoader","models":[{"name":"ae.safetensors","url":"https://huggingface.co/Comfy-Org/Lumina_Image_2.0_Repackaged/resolve/main/split_files/vae/ae.safetensors","directory":"vae"}]},"widgets_values":["ae.safetensors"]},{"id":38,"type":"DualCLIPLoader","pos":[-1435.5077103074304,261.95073901170355],"size":[470.25,228.375],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"clip_name1","name":"clip_name1","type":"COMBO","widget":{"name":"clip_name1"},"link":null},{"localized_name":"clip_name2","name":"clip_name2","type":"COMBO","widget":{"name":"clip_name2"},"link":null},{"localized_name":"type","name":"type","type":"COMBO","widget":{"name":"type"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"CLIP","name":"CLIP","type":"CLIP","links":[59]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.38","Node name for S&R":"DualCLIPLoader","models":[{"name":"clip_l.safetensors","url":"https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/clip_l.safetensors","directory":"text_encoders"},{"name":"t5xxl_fp8_e4m3fn_scaled.safetensors","url":"https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp8_e4m3fn_scaled.safetensors","directory":"text_encoders"}]},"widgets_values":["clip_l.safetensors","t5xxl_fp8_e4m3fn_scaled.safetensors","flux","default"]},{"id":135,"type":"ConditioningZeroOut","pos":[-76.08334685797263,261.6510899623943],"size":[235.75,114.75],"flags":{"collapsed":false},"order":9,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":237}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[238]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"ConditioningZeroOut"},"widgets_values":[]},{"id":173,"type":"PreviewImage","pos":[892.1587325706128,108.97544694498903],"size":[420,576],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":314}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.40","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":136,"type":"SaveImage","pos":[1338.4634821897866,113.33293447645464],"size":[410.8125,570.8125],"flags":{},"order":16,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":240},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":8,"type":"VAEDecode","pos":[624.7437766744674,105.21609833758001],"size":[225,191.3125],"flags":{"collapsed":false},"order":15,"mode":0,"inputs":[{"localized_name":"samples","name":"samples","type":"LATENT","link":52},{"localized_name":"vae","name":"vae","type":"VAE","link":61}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","slot_index":0,"links":[240,310]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.38","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":124,"type":"VAEEncode","pos":[-76.10709296113237,425.9053687712732],"size":[240,116.71875],"flags":{"collapsed":false},"order":10,"mode":0,"inputs":[{"localized_name":"pixels","name":"pixels","type":"IMAGE","link":313},{"localized_name":"vae","name":"vae","type":"VAE","link":223}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","links":[291,293]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"VAEEncode"},"widgets_values":[]},{"id":35,"type":"FluxGuidance","pos":[-75.77480272018374,99.02967585253369],"size":[233.21875,127.5625],"flags":{"collapsed":false},"order":13,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":292},{"localized_name":"guidance","name":"guidance","type":"FLOAT","widget":{"name":"guidance"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[57]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.38","Node name for S&R":"FluxGuidance"},"widgets_values":[2.5]},{"id":37,"type":"UNETLoader","pos":[-1431.8736253042507,87.41382522250917],"size":[461.6875,164.53125],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"unet_name","name":"unet_name","type":"COMBO","widget":{"name":"unet_name"},"link":null},{"localized_name":"weight_dtype","name":"weight_dtype","type":"COMBO","widget":{"name":"weight_dtype"},"link":null}],"outputs":[{"localized_name":"MODEL","name":"MODEL","type":"MODEL","links":[58]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.38","Node name for S&R":"UNETLoader","models":[{"name":"flux1-dev-kontext_fp8_scaled.safetensors","url":"https://huggingface.co/Comfy-Org/flux1-kontext-dev_ComfyUI/resolve/main/split_files/diffusion_models/flux1-dev-kontext_fp8_scaled.safetensors","directory":"diffusion_models"}]},"widgets_values":["flux1-dev-kontext_fp8_scaled.safetensors","fp8_e4m3fn_fast"]},{"id":177,"type":"ReferenceLatent","pos":[-394.4150696372301,97.41470803273509],"size":[225,126.03125],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"conditioning","name":"conditioning","type":"CONDITIONING","link":294},{"localized_name":"latent","name":"latent","shape":7,"type":"LATENT","link":293}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","links":[292]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.41","Node name for S&R":"ReferenceLatent"},"widgets_values":[]},{"id":6,"type":"CLIPTextEncode","pos":[-891.6001909683339,94.20963401993468],"size":[412.6875,558.5],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"clip","name":"clip","type":"CLIP","link":59},{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"CONDITIONING","name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[237,294]}],"title":"CLIP Text Encode (Positive Prompt)","properties":{"cnr_id":"comfy-core","ver":"0.3.38","Node name for S&R":"CLIPTextEncode"},"widgets_values":["Remove the interface"],"color":"#232","bgcolor":"#353"},{"id":31,"type":"KSampler","pos":[252.04247945003317,101.3251470416216],"size":[320,443.3125],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"model","name":"model","type":"MODEL","link":58},{"localized_name":"positive","name":"positive","type":"CONDITIONING","link":57},{"localized_name":"negative","name":"negative","type":"CONDITIONING","link":238},{"localized_name":"latent_image","name":"latent_image","type":"LATENT","link":291},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"steps","name":"steps","type":"INT","widget":{"name":"steps"},"link":null},{"localized_name":"cfg","name":"cfg","type":"FLOAT","widget":{"name":"cfg"},"link":null},{"localized_name":"sampler_name","name":"sampler_name","type":"COMBO","widget":{"name":"sampler_name"},"link":null},{"localized_name":"scheduler","name":"scheduler","type":"COMBO","widget":{"name":"scheduler"},"link":null},{"localized_name":"denoise","name":"denoise","type":"FLOAT","widget":{"name":"denoise"},"link":null}],"outputs":[{"localized_name":"LATENT","name":"LATENT","type":"LATENT","slot_index":0,"links":[52]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.38","Node name for S&R":"KSampler"},"widgets_values":[491642830387157,"randomize",30,1,"euler","beta",1]},{"id":190,"type":"LoadImage","pos":[-1438.2217502156345,666.1631248293834],"size":[476.75,956.28125],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[306,309]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.64","Node name for S&R":"LoadImage","image":"clipspace/clipspace-painted-masked-1765788632957.png [input]"},"widgets_values":["select_input_image.png","image"]},{"id":199,"type":"SaveImage","pos":[894.0922551403164,712.4492851938704],"size":[851.1875,924.71875],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":312},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.39","Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":201,"type":"VisualMarqueeSelection","pos":[-938.862618819101,666.6005264975538],"size":[504.90625,954.09375],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":306},{"localized_name":"max_resolution","name":"max_resolution","type":"INT","widget":{"name":"max_resolution"},"link":null},{"localized_name":"original_size","name":"original_size","type":"BOOLEAN","widget":{"name":"original_size"},"link":null},{"localized_name":"force_multiple_of_8","name":"force_multiple_of_8","type":"BOOLEAN","widget":{"name":"force_multiple_of_8"},"link":null}],"outputs":[{"localized_name":"cropped_image","name":"cropped_image","type":"IMAGE","links":[313,314]},{"localized_name":"mask","name":"mask","type":"MASK","links":null},{"localized_name":"tile_data","name":"tile_data","type":"TILE_DATA","links":[311]}],"properties":{"cnr_id":"comfyui-flow-assistor","ver":"1.0.2","Node name for S&R":"VisualMarqueeSelection"},"widgets_values":[1024,true,true]},{"id":202,"type":"TileCompositor","pos":[34.58342687711638,667.388144386509],"size":[325.9375,189.3125],"flags":{},"order":17,"mode":0,"inputs":[{"localized_name":"base_image","name":"base_image","type":"IMAGE","link":309},{"localized_name":"processed_tile","name":"processed_tile","type":"IMAGE","link":310},{"localized_name":"tile_data","name":"tile_data","type":"TILE_DATA","link":311},{"localized_name":"feather","name":"feather","shape":7,"type":"INT","widget":{"name":"feather"},"link":null}],"outputs":[{"localized_name":"composite_image","name":"composite_image","type":"IMAGE","links":[312]}],"properties":{"cnr_id":"comfyui-flow-assistor","ver":"1.0.2","Node name for S&R":"TileCompositor"},"widgets_values":[16]},{"id":205,"type":"MarkdownNote","pos":[-2574.6827376602296,89.35060706127393],"size":[519,573.390625],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"title":"Model links","properties":{},"widgets_values":["**diffusion model**\n\n- [flux1-dev-kontext_fp8_scaled.safetensors](https://huggingface.co/Comfy-Org/flux1-kontext-dev_ComfyUI/resolve/main/split_files/diffusion_models/flux1-dev-kontext_fp8_scaled.safetensors)\n\n**vae**\n\n- [ae.safetensors](https://huggingface.co/Comfy-Org/Lumina_Image_2.0_Repackaged/blob/main/split_files/vae/ae.safetensors)\n\n**text encoder**\n\n- [clip_l.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/blob/main/clip_l.safetensors)\n- [t5xxl_fp16.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp16.safetensors) or [t5xxl_fp8_e4m3fn_scaled.safetensors](https://huggingface.co/comfyanonymous/flux_text_encoders/resolve/main/t5xxl_fp8_e4m3fn_scaled.safetensors)\n\nModel Storage Location\n\n```\nðŸ“‚ ComfyUI/\nâ”œâ”€â”€ ðŸ“‚ models/\nâ”‚   â”œâ”€â”€ ðŸ“‚ diffusion_models/\nâ”‚   â”‚   â””â”€â”€ flux1-dev-kontext_fp8_scaled.safetensors\nâ”‚   â”œâ”€â”€ ðŸ“‚ vae/\nâ”‚   â”‚   â””â”€â”€ ae.safetensor\nâ”‚   â””â”€â”€ ðŸ“‚ text_encoders/\nâ”‚       â”œâ”€â”€ clip_l.safetensors\nâ”‚       â””â”€â”€ t5xxl_fp16.safetensors or t5xxl_fp8_e4m3fn_scaled.safetensors\n"],"color":"#432","bgcolor":"#653"},{"id":206,"type":"MarkdownNote","pos":[-2031.4945952641206,88.7173388428574],"size":[573.90625,754.375],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"title":"Flux Kontext Prompt Techniques","properties":{},"widgets_values":["# Interactive Editing with FLUX Kontext & Flow Assistor\n\nThis guide explains how to use the **Visual Marquee (Interactive)** and **Tile Compositor (Merge)** nodes to perform precision editing (in-painting) on specific parts of an image using FLUX Kontext/Dev models.\n\n> **Support the author** â€” [www.patreon.com/mm744](https://www.patreon.com/mm744)\n\n---\n\n## ðŸš€ How to Run the Edit\n\n1.  **Queue Prompt:** Press the **Queue** button in ComfyUI as normal.\n2.  **Wait for Popup:** The workflow will start, process the initial image, and then **pause**. A \"Select Area\" window will appear over your ComfyUI interface.\n3.  **Select & Adjust:**\n    *   **Draw/Resize:** Draw a box around the object or area you want to modify using the handles.\n    *   **Mode Check:**\n        *   *Original Size (True):* Returns the exact pixel size of your selection.\n        *   *Original Size (False):* Upscales your selection to the `max_resolution` (e.g., 1024px). **Recommended for Flux**, as it allows the model to generate high-quality details even on small faces or objects, which are then scaled back down perfectly by the Compositor.\n4.  **Confirm:** Click **\"CONFIRM & RESUME\"**.\n5.  **Result:** The workflow continues. It edits *only* the selected area and seamlessly merges it back into your original image."],"color":"#432","bgcolor":"#653"},{"id":207,"type":"Note","pos":[-890.9315752009327,-198.18610599784213],"size":[410.25,270.46875],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["ðŸŽ¨ Color & Texture\nChange Color: Change the car color to matte black\nSpecific Shade: Change the dress to emerald green satin\nMaterial: Change the wooden table to a marble surface\nLighting: Make the lamp glow with warm yellow light\n\nðŸ’‡ Hair & Face\nHaircut: Change the hairstyle to a short bob cut\nHair Color: Dye the hair platinum blonde\nExpression: Make the person smile\nEyes: Change the eye color to blue\nGlasses: Put on sunglasses\n\nðŸ‘• Clothing & Accessories\nOutfit: Change the t-shirt to a white formal shirt\nJewelry: Add a gold necklace\nHeadwear: Add a red baseball cap\nFootwear: Change the shoes to leather boots\n\nðŸ§¹ Removal & Cleaning\nLogos: Remove the text logo from the hoodie\nObject: Remove the trash can from the background\nAccessory: Remove the glasses\nBlemishes: Remove the tattoo from the arm\n\nðŸ”§ Fixing & Corrections\nHands: Fix the hand, ensure 5 fingers\nEyes: Fix the eyes, look straight at camera\nTeeth: Fix the teeth, make them straight\nDetails: Sharpen the blurred face details"],"color":"#432","bgcolor":"#653"}],"links":[[52,31,0,8,0,"LATENT"],[57,35,0,31,1,"CONDITIONING"],[58,37,0,31,0,"MODEL"],[59,38,0,6,0,"CLIP"],[61,39,0,8,1,"VAE"],[223,39,0,124,1,"VAE"],[237,6,0,135,0,"CONDITIONING"],[238,135,0,31,2,"CONDITIONING"],[240,8,0,136,0,"IMAGE"],[291,124,0,31,3,"LATENT"],[292,177,0,35,0,"CONDITIONING"],[293,124,0,177,1,"LATENT"],[294,6,0,177,0,"CONDITIONING"],[306,190,0,201,0,"IMAGE"],[309,190,0,202,0,"IMAGE"],[310,8,0,202,1,"IMAGE"],[311,201,2,202,2,"TILE_DATA"],[312,202,0,199,0,"IMAGE"],[313,201,0,124,0,"IMAGE"],[314,201,0,173,0,"IMAGE"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.5372029592684345,"offset":[3302.925510932479,150.03791785912614]},"frontendVersion":"1.28.7","groupNodes":{},"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}